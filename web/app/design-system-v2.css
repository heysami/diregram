:root {
  --dg-bg: #e1e3e6;
  --dg-surface: #f4f5f7;
  --dg-surface-alt: #eaedf1;
  --dg-surface-muted: #eef0f3;
  --dg-text: #181b20;
  --dg-muted: #6f7680;
  --dg-border: #bcc2ca;
  --dg-border-strong: #989fa9;
  --dg-border-soft: rgba(24, 27, 32, 0.16);
  --dg-accent: #e11d48;
  --dg-accent-2: #fb7185;
  --dg-link: #3a89dc;
  --dg-radius-sm: 8px;
  --dg-radius-md: 12px;
  --dg-radius-lg: 18px;
  --dg-shadow-sm: 0 2px 6px rgba(24, 27, 32, 0.09);
  --dg-shadow-md: 0 14px 28px rgba(24, 27, 32, 0.12);
  --dg-shadow-lg: 0 24px 40px rgba(24, 27, 32, 0.16);
  --dg-shadow-idle: 0 1px 0 rgba(15, 16, 18, 0.2);
  --dg-control-h: 2.28rem;
  --dg-control-h-lg: 2.62rem;
  --dg-control-h-icon: 2rem;
  --dg-control-h-icon-sm: 1.78rem;
  --dg-control-radius: 10px;
  --dg-plus-pattern: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='24' height='24' viewBox='0 0 24 24'%3E%3Cpath d='M12 9v6M9 12h6' stroke='%23181b20' stroke-opacity='0.2' stroke-width='1' stroke-linecap='square' shape-rendering='crispEdges'/%3E%3C/svg%3E");
}

html[data-theme="diregram-v2"] {
  --background: var(--dg-bg);
  --foreground: var(--dg-text);
  --mac-black: var(--dg-text);
  --mac-white: #ffffff;
  --canvas-plus-size: 24px;
}

html[data-theme="diregram-v2"] body {
  background: var(--dg-bg);
  color: var(--dg-text);
  font-family: var(--font-lexend), "Helvetica Neue", Helvetica, Arial, system-ui, sans-serif;
}

html[data-theme="diregram-v2"] ::selection {
  background: var(--dg-accent);
  color: #fff;
}

html[data-theme="diregram-v2"] .mac-desktop {
  background: var(--dg-bg);
  background-image:
    linear-gradient(180deg, rgba(255, 255, 255, 0.56), rgba(255, 255, 255, 0) 34%),
    var(--dg-plus-pattern);
  background-size:
    auto,
    calc(var(--canvas-plus-size) * var(--canvas-zoom, 1))
    calc(var(--canvas-plus-size) * var(--canvas-zoom, 1));
  background-position: 0 0, 0 0;
  background-repeat: no-repeat, repeat;
}

html[data-theme="diregram-v2"] .mac-canvas-bg {
  background: var(--dg-surface-alt);
  background-image: var(--dg-plus-pattern);
  background-size:
    calc(var(--canvas-plus-size) * var(--canvas-zoom, 1))
    calc(var(--canvas-plus-size) * var(--canvas-zoom, 1));
  background-position: 0 0;
  background-repeat: repeat;
}

html[data-theme="diregram-v2"] .dg-screen-fade-in {
  animation: dg-screen-fade-in 220ms cubic-bezier(0.2, 0.65, 0.3, 0.9) both;
}

html[data-theme="diregram-v2"] .dg-switch-fade {
  transition: opacity 160ms ease;
}

html[data-theme="diregram-v2"] .dg-switch-fade--hidden {
  opacity: 0;
  pointer-events: none;
}

html[data-theme="diregram-v2"] .dg-switch-fade--visible {
  opacity: 1;
}

@keyframes dg-screen-fade-in {
  0% {
    opacity: 0;
  }
  100% {
    opacity: 1;
  }
}

html[data-theme="diregram-v2"] .dg-screen-loading {
  background-color: color-mix(in oklab, var(--dg-bg) 90%, white);
  animation: dg-screen-loading-bg 2400ms ease-in-out infinite;
}

@keyframes dg-screen-loading-bg {
  0% {
    background-color: color-mix(in oklab, var(--dg-bg) 92%, white);
  }
  35% {
    background-color: color-mix(in oklab, var(--dg-bg) 84%, white);
  }
  70% {
    background-color: color-mix(in oklab, var(--dg-bg) 88%, white);
  }
  100% {
    background-color: color-mix(in oklab, var(--dg-bg) 94%, white);
  }
}

html[data-theme="diregram-v2"] .mac-menubar {
  border-bottom: 1px solid var(--dg-border-soft);
  background: color-mix(in oklab, var(--dg-bg) 88%, white);
  backdrop-filter: blur(6px);
}

html[data-theme="diregram-v2"] .mac-window {
  background: color-mix(in oklab, var(--dg-surface) 88%, white);
  border: 1px solid var(--dg-border);
  box-shadow: var(--dg-shadow-md);
  border-radius: var(--dg-radius-lg);
}

html[data-theme="diregram-v2"] .mac-double-outline {
  border: 1px solid color-mix(in oklab, var(--dg-border) 90%, white);
  box-shadow: var(--dg-shadow-sm);
  border-radius: var(--dg-radius-md);
}

html[data-theme="diregram-v2"] .mac-diamond-outline-svg {
  display: block;
  pointer-events: none;
}

html[data-theme="diregram-v2"] .mac-titlebar {
  background: color-mix(in oklab, var(--dg-surface) 92%, white);
  border-bottom: 1px solid var(--dg-border);
  min-height: 38px;
  position: relative;
  display: flex;
  align-items: center;
  justify-content: center;
}

html[data-theme="diregram-v2"] .mac-titlebar .mac-title {
  font-family: var(--font-lexend), "Helvetica Neue", Helvetica, Arial, system-ui, sans-serif;
  font-size: 11px;
  letter-spacing: 0.04em;
  color: var(--dg-muted);
}

html[data-theme="diregram-v2"] .mac-btn[class*="px-"] {
  min-height: var(--dg-control-h);
  border-radius: var(--dg-control-radius);
}

html[data-theme="diregram-v2"] .mac-btn {
  border: 1px solid var(--dg-border-strong);
  background: color-mix(in oklab, var(--dg-surface) 88%, white);
  color: var(--dg-text);
  border-radius: var(--dg-control-radius);
  box-shadow: var(--dg-shadow-idle);
  padding: 0.5rem 0.96rem;
  min-height: var(--dg-control-h);
  height: var(--dg-control-h);
  line-height: 1;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  white-space: nowrap;
  font-family: var(--font-sometype-mono), ui-monospace, monospace;
  font-size: 11.5px;
  letter-spacing: 0.1em;
  text-transform: uppercase;
  transition: transform 140ms ease, box-shadow 140ms ease, background-color 140ms ease, color 140ms ease, border-color 140ms ease;
}

html[data-theme="diregram-v2"] .mac-btn.h-7 {
  padding-inline: 0.68rem;
}

html[data-theme="diregram-v2"] .mac-btn.h-8,
html[data-theme="diregram-v2"] .mac-btn.h-9,
html[data-theme="diregram-v2"] .mac-btn.h-10 {
  padding-inline: 0.82rem;
}

html[data-theme="diregram-v2"] .mac-btn--icon {
  width: var(--dg-control-h-icon);
  min-width: var(--dg-control-h-icon);
  height: var(--dg-control-h-icon);
  min-height: var(--dg-control-h-icon);
  padding: 0;
  border-radius: 0.56rem;
}

html[data-theme="diregram-v2"] .mac-btn--icon-sm {
  width: var(--dg-control-h-icon-sm);
  min-width: var(--dg-control-h-icon-sm);
  height: var(--dg-control-h-icon-sm);
  min-height: var(--dg-control-h-icon-sm);
  padding: 0;
  border-radius: 0.5rem;
}

html[data-theme="diregram-v2"] .mac-btn:hover {
  transform: translateY(-1px);
  background: color-mix(in oklab, var(--dg-surface-muted) 82%, white);
  border-color: var(--dg-border-strong);
  box-shadow: 0 2px 0 rgba(15, 16, 18, 0.24), 0 10px 18px rgba(15, 16, 18, 0.09);
}

html[data-theme="diregram-v2"] .mac-btn:active {
  transform: translateY(0);
  box-shadow: none;
}

html[data-theme="diregram-v2"] .mac-btn:focus-visible {
  outline: 1px solid color-mix(in oklab, var(--dg-accent) 65%, black);
  outline-offset: 1px;
}

html[data-theme="diregram-v2"] .mac-btn--primary {
  background: var(--dg-accent);
  border-color: color-mix(in oklab, var(--dg-accent) 68%, black);
  color: #fff;
}

html[data-theme="diregram-v2"] .mac-btn--primary:hover {
  background: color-mix(in oklab, var(--dg-accent) 85%, black);
}

html[data-theme="diregram-v2"] .mac-btn--dark {
  background: #191c21;
  border-color: #191c21;
  color: #fff;
}

html[data-theme="diregram-v2"] .mac-btn--dark:hover {
  background: #121418;
  border-color: #121418;
}

html[data-theme="diregram-v2"] .mac-btn--lg {
  height: var(--dg-control-h-lg);
  min-height: var(--dg-control-h-lg);
  padding-inline: 1.15rem;
  font-size: 11.5px;
}

html[data-theme="diregram-v2"] .mac-btn.w-5,
html[data-theme="diregram-v2"] .mac-btn.w-6,
html[data-theme="diregram-v2"] .mac-btn.w-7,
html[data-theme="diregram-v2"] .mac-btn.w-8,
html[data-theme="diregram-v2"] .mac-btn.w-9,
html[data-theme="diregram-v2"] .mac-btn.w-10,
html[data-theme="diregram-v2"] .mac-btn.w-12 {
  padding-inline: 0;
  width: var(--dg-control-h-icon);
  min-width: var(--dg-control-h-icon);
}

html[data-theme="diregram-v2"] .mac-shadow-hard {
  box-shadow: var(--dg-shadow-lg) !important;
}

html[data-theme="diregram-v2"] .mac-toolstrip {
  display: flex;
  align-items: center;
  flex-wrap: wrap;
  gap: 0.5rem;
  padding: 0.54rem;
  background: transparent;
}

html[data-theme="diregram-v2"] .mac-toolbtn {
  width: 2.38rem;
  height: 2.38rem;
  min-width: 2.38rem;
  min-height: 2.38rem;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  border: 1px solid var(--dg-border-strong);
  border-radius: 0.66rem;
  background: color-mix(in oklab, var(--dg-surface) 90%, white);
  color: var(--dg-text);
  box-shadow: var(--dg-shadow-idle);
  transition: transform 140ms ease, box-shadow 140ms ease, background-color 140ms ease, color 140ms ease, border-color 140ms ease;
}

html[data-theme="diregram-v2"] .mac-toolbtn:hover {
  transform: translateY(-1px);
  box-shadow: 0 2px 0 rgba(15, 16, 18, 0.22), 0 8px 14px rgba(15, 16, 18, 0.08);
}

html[data-theme="diregram-v2"] .mac-toolbtn.is-active {
  background: var(--dg-accent);
  color: #fff;
  border-color: color-mix(in oklab, var(--dg-accent) 66%, black);
  box-shadow: 0 2px 0 rgba(15, 16, 18, 0.26);
}

html[data-theme="diregram-v2"] .mac-sep {
  width: 1px;
  height: 1.7rem;
  background: color-mix(in oklab, var(--dg-border) 84%, #fff);
  margin: 0 0.2rem;
}

html[data-theme="diregram-v2"] .mac-tooltip {
  border: 1px solid var(--dg-border-strong);
  border-radius: var(--dg-radius-sm);
  background: color-mix(in oklab, var(--dg-surface) 94%, white);
  color: var(--dg-text);
  box-shadow: var(--dg-shadow-sm);
  padding: 0.2rem 0.45rem;
  font-family: var(--font-sometype-mono), ui-monospace, monospace;
  font-size: 10px;
  letter-spacing: 0.08em;
  text-transform: uppercase;
}

html[data-theme="diregram-v2"] .mac-popover {
  border: 1px solid var(--dg-border);
  border-radius: var(--dg-radius-md);
  background: color-mix(in oklab, var(--dg-surface) 92%, white);
  box-shadow: var(--dg-shadow-md);
}

html[data-theme="diregram-v2"] .mac-label-plate {
  border: 1px solid var(--dg-border);
  background: color-mix(in oklab, var(--dg-surface) 88%, white);
  box-shadow: var(--dg-shadow-sm);
  border-radius: 999px;
}

html[data-theme="diregram-v2"] .mac-field {
  background: color-mix(in oklab, var(--dg-surface) 90%, white);
  border: 1px solid var(--dg-border-strong);
  border-radius: var(--dg-control-radius);
  box-shadow: none;
  font-family: var(--font-lexend), "Helvetica Neue", Helvetica, Arial, system-ui, sans-serif;
  font-size: 12px;
  height: 2.56rem;
  min-height: 2.56rem;
  padding: 0.38rem 0.65rem;
  line-height: 1.1;
}

html[data-theme="diregram-v2"] .mac-field::placeholder {
  color: color-mix(in oklab, var(--dg-muted) 82%, #fff);
}

html[data-theme="diregram-v2"] .mac-field:focus {
  outline: 1px solid color-mix(in oklab, var(--dg-accent) 68%, black);
  outline-offset: 0;
}

html[data-theme="diregram-v2"] input:not([type="checkbox"]):not([type="radio"]):not([type="range"]):not([type="color"]),
html[data-theme="diregram-v2"] textarea,
html[data-theme="diregram-v2"] select {
  border-radius: var(--dg-control-radius) !important;
  border-width: 1px !important;
  border-color: color-mix(in oklab, var(--dg-border-strong) 86%, #fff) !important;
  background: color-mix(in oklab, var(--dg-surface) 90%, white);
  color: var(--dg-text);
  box-shadow: none !important;
}

html[data-theme="diregram-v2"] input:not([type="checkbox"]):not([type="radio"]):not([type="range"]):not([type="color"]):focus,
html[data-theme="diregram-v2"] textarea:focus,
html[data-theme="diregram-v2"] select:focus {
  border-color: color-mix(in oklab, var(--dg-accent) 68%, black) !important;
  outline: 1px solid color-mix(in oklab, var(--dg-accent) 58%, black) !important;
  outline-offset: 0;
}

/* Generic Tailwind-sized icon buttons (exclude our `.mac-btn` so `mac-btn--primary` etc can win). */
html[data-theme="diregram-v2"] button.h-6.w-6:not(.mac-btn),
html[data-theme="diregram-v2"] button.h-7.w-7:not(.mac-btn),
html[data-theme="diregram-v2"] button.h-8.w-8:not(.mac-btn),
html[data-theme="diregram-v2"] button.h-9.w-9:not(.mac-btn),
html[data-theme="diregram-v2"] button.h-10.w-10:not(.mac-btn) {
  width: var(--dg-control-h-icon) !important;
  min-width: var(--dg-control-h-icon) !important;
  height: var(--dg-control-h-icon) !important;
  min-height: var(--dg-control-h-icon) !important;
  padding: 0;
  aspect-ratio: 1 / 1;
  border: 1px solid var(--dg-border-strong);
  border-radius: 0.56rem;
  background: color-mix(in oklab, var(--dg-surface) 90%, white);
  color: var(--dg-text);
  box-shadow: var(--dg-shadow-idle);
  transition: transform 140ms ease, box-shadow 140ms ease, background-color 140ms ease, color 140ms ease, border-color 140ms ease;
  display: inline-flex;
  align-items: center;
  justify-content: center;
}

html[data-theme="diregram-v2"] button.h-6.w-6:not(.mac-btn):hover,
html[data-theme="diregram-v2"] button.h-7.w-7:not(.mac-btn):hover,
html[data-theme="diregram-v2"] button.h-8.w-8:not(.mac-btn):hover,
html[data-theme="diregram-v2"] button.h-9.w-9:not(.mac-btn):hover,
html[data-theme="diregram-v2"] button.h-10.w-10:not(.mac-btn):hover {
  transform: translateY(-1px);
  background: color-mix(in oklab, var(--dg-surface-muted) 84%, white);
  box-shadow: 0 2px 0 rgba(15, 16, 18, 0.22), 0 8px 14px rgba(15, 16, 18, 0.08);
}

html[data-theme="diregram-v2"] button.h-6.w-6:not(.mac-btn):focus-visible,
html[data-theme="diregram-v2"] button.h-7.w-7:not(.mac-btn):focus-visible,
html[data-theme="diregram-v2"] button.h-8.w-8:not(.mac-btn):focus-visible,
html[data-theme="diregram-v2"] button.h-9.w-9:not(.mac-btn):focus-visible,
html[data-theme="diregram-v2"] button.h-10.w-10:not(.mac-btn):focus-visible {
  outline: 1px solid color-mix(in oklab, var(--dg-accent) 65%, black);
  outline-offset: 1px;
}

html[data-theme="diregram-v2"] .mac-interactive-row {
  border: 1px solid color-mix(in oklab, var(--dg-border) 88%, #fff);
  border-radius: var(--dg-control-radius);
  background: color-mix(in oklab, var(--dg-surface) 92%, white);
  transition: background-color 140ms ease, border-color 140ms ease, box-shadow 140ms ease, transform 140ms ease;
}

html[data-theme="diregram-v2"] .mac-interactive-row:hover {
  border-color: var(--dg-border-strong);
  /* Neutral hover (no pink tint). */
  background: color-mix(in oklab, var(--dg-surface-muted) 86%, white);
  box-shadow: 0 2px 0 rgba(15, 16, 18, 0.14), 0 8px 12px rgba(15, 16, 18, 0.07);
  transform: translateY(-1px);
}

html[data-theme="diregram-v2"] .mac-interactive-row.is-active,
html[data-theme="diregram-v2"] .mac-interactive-row[aria-selected="true"] {
  border-color: color-mix(in oklab, var(--dg-accent) 66%, black);
  background: color-mix(in oklab, var(--dg-accent) 12%, white);
  box-shadow: 0 0 0 1px color-mix(in oklab, var(--dg-accent) 44%, transparent), 0 2px 0 rgba(15, 16, 18, 0.18);
}

html[data-theme="diregram-v2"] .mac-menu-item {
  border-radius: 8px;
  transition: background-color 120ms ease, color 120ms ease;
}

html[data-theme="diregram-v2"] .mac-menu-item:hover {
  background: color-mix(in oklab, var(--dg-accent) 12%, white) !important;
  color: color-mix(in oklab, var(--dg-accent) 74%, black) !important;
}

html[data-theme="diregram-v2"] .mac-menu-item.is-active,
html[data-theme="diregram-v2"] .mac-menu-item[aria-selected="true"] {
  background: color-mix(in oklab, var(--dg-accent) 17%, white) !important;
  color: color-mix(in oklab, var(--dg-accent) 80%, black) !important;
}

html[data-theme="diregram-v2"] .border-black {
  border-color: var(--dg-border-strong) !important;
}

html[data-theme="diregram-v2"] .border-black\/10 {
  border-color: color-mix(in oklab, var(--dg-border) 55%, transparent) !important;
}

html[data-theme="diregram-v2"] .border-black\/20 {
  border-color: color-mix(in oklab, var(--dg-border) 75%, transparent) !important;
}

html[data-theme="diregram-v2"] .bg-white {
  background-color: color-mix(in oklab, var(--dg-surface) 88%, white) !important;
}

html[data-theme="diregram-v2"] .bg-\[\#f0f0f0\] {
  background-color: var(--dg-bg) !important;
}

html[data-theme="diregram-v2"] .bg-\[\#e5e5e5\] {
  background-color: var(--dg-surface-alt) !important;
}

html[data-theme="diregram-v2"] .text-neutral-500 {
  color: var(--dg-muted) !important;
}

html[data-theme="diregram-v2"] .text-neutral-600 {
  color: color-mix(in oklab, var(--dg-muted) 88%, #111) !important;
}

html[data-theme="diregram-v2"] .text-neutral-400 {
  color: color-mix(in oklab, var(--dg-muted) 72%, #fff) !important;
}

html[data-theme="diregram-v2"] .hover\:text-\[\#E11D48\]:hover {
  color: var(--dg-accent) !important;
}

html[data-theme="diregram-v2"] .ring-blue-50,
html[data-theme="diregram-v2"] .ring-blue-100,
html[data-theme="diregram-v2"] .ring-blue-200,
html[data-theme="diregram-v2"] .ring-blue-300,
html[data-theme="diregram-v2"] .ring-blue-400,
html[data-theme="diregram-v2"] .ring-blue-500,
html[data-theme="diregram-v2"] .ring-blue-600,
html[data-theme="diregram-v2"] .ring-blue-700 {
  --tw-ring-color: color-mix(in oklab, var(--dg-accent) 70%, transparent) !important;
}

html[data-theme="diregram-v2"] .focus\:ring-blue-50:focus,
html[data-theme="diregram-v2"] .focus\:ring-blue-100:focus,
html[data-theme="diregram-v2"] .focus\:ring-blue-200:focus,
html[data-theme="diregram-v2"] .focus\:ring-blue-300:focus,
html[data-theme="diregram-v2"] .focus\:ring-blue-400:focus,
html[data-theme="diregram-v2"] .focus\:ring-blue-500:focus,
html[data-theme="diregram-v2"] .focus\:ring-blue-600:focus,
html[data-theme="diregram-v2"] .focus\:ring-blue-700:focus {
  --tw-ring-color: color-mix(in oklab, var(--dg-accent) 70%, transparent) !important;
}

html[data-theme="diregram-v2"] .border-blue-50,
html[data-theme="diregram-v2"] .border-blue-100,
html[data-theme="diregram-v2"] .border-blue-200,
html[data-theme="diregram-v2"] .border-blue-300,
html[data-theme="diregram-v2"] .border-blue-400,
html[data-theme="diregram-v2"] .border-blue-500,
html[data-theme="diregram-v2"] .border-blue-600,
html[data-theme="diregram-v2"] .border-blue-700 {
  border-color: color-mix(in oklab, var(--dg-accent) 55%, #fff) !important;
}

html[data-theme="diregram-v2"] .bg-blue-50,
html[data-theme="diregram-v2"] .bg-blue-100,
html[data-theme="diregram-v2"] .bg-blue-200 {
  background-color: color-mix(in oklab, var(--dg-accent) 12%, white) !important;
}

html[data-theme="diregram-v2"] .bg-slate-100,
html[data-theme="diregram-v2"] .bg-gray-100 {
  background-color: color-mix(in oklab, var(--dg-accent) 12%, white) !important;
}

html[data-theme="diregram-v2"] .bg-blue-500,
html[data-theme="diregram-v2"] .bg-blue-600,
html[data-theme="diregram-v2"] .bg-blue-700,
html[data-theme="diregram-v2"] .hover\:bg-blue-500:hover,
html[data-theme="diregram-v2"] .hover\:bg-blue-600:hover,
html[data-theme="diregram-v2"] .hover\:bg-blue-700:hover {
  background-color: var(--dg-accent) !important;
  border-color: color-mix(in oklab, var(--dg-accent) 66%, black) !important;
  color: #fff !important;
}

html[data-theme="diregram-v2"] .bg-blue-500\/5 {
  background-color: color-mix(in oklab, var(--dg-accent) 5%, white) !important;
}

html[data-theme="diregram-v2"] .bg-blue-500\/10 {
  background-color: color-mix(in oklab, var(--dg-accent) 10%, white) !important;
}

html[data-theme="diregram-v2"] .bg-blue-500\/80 {
  background-color: color-mix(in oklab, var(--dg-accent) 80%, black) !important;
}

html[data-theme="diregram-v2"] .text-blue-500,
html[data-theme="diregram-v2"] .text-blue-600,
html[data-theme="diregram-v2"] .text-blue-700,
html[data-theme="diregram-v2"] .text-blue-800,
html[data-theme="diregram-v2"] .text-blue-900 {
  color: color-mix(in oklab, var(--dg-accent) 72%, black) !important;
}

html[data-theme="diregram-v2"] .hover\:text-blue-500:hover,
html[data-theme="diregram-v2"] .hover\:text-blue-600:hover,
html[data-theme="diregram-v2"] .hover\:text-blue-700:hover,
html[data-theme="diregram-v2"] .hover\:text-blue-800:hover,
html[data-theme="diregram-v2"] .hover\:text-blue-900:hover {
  color: color-mix(in oklab, var(--dg-accent) 82%, black) !important;
}

html[data-theme="diregram-v2"] .hover\:bg-blue-50:hover,
html[data-theme="diregram-v2"] .hover\:bg-blue-100:hover,
html[data-theme="diregram-v2"] .hover\:bg-gray-50:hover,
html[data-theme="diregram-v2"] .hover\:bg-slate-50:hover,
html[data-theme="diregram-v2"] .hover\:bg-slate-100:hover {
  background-color: color-mix(in oklab, var(--dg-accent) 10%, white) !important;
}

html[data-theme="diregram-v2"] .dg-node-card {
  --dg-node-pad-x: 0.84rem;
  --dg-node-pad-top: 0.7rem;
  --dg-node-pad-bottom: 0.94rem;
  border: 1px solid var(--dg-border-strong);
  background: color-mix(in oklab, white 96%, var(--dg-surface));
  border-radius: 1.18rem;
  padding: var(--dg-node-pad-top) var(--dg-node-pad-x) var(--dg-node-pad-bottom);
  min-height: 114px;
  box-shadow: 0 3px 0 rgba(15, 16, 18, 0.22), 0 10px 18px rgba(15, 16, 18, 0.09);
}

html[data-theme="diregram-v2"] .dg-node-card--idle {
  color: var(--dg-text);
}

html[data-theme="diregram-v2"] .dg-node-card--active {
  background: #171a1f !important;
  background-image: none !important;
  border-color: #171a1f !important;
  color: #f8fafc !important;
  box-shadow: 0 2px 0 rgba(15, 16, 18, 0.34), 0 14px 24px rgba(15, 16, 18, 0.22);
}

html[data-theme="diregram-v2"] .dg-node-card__meta-row {
  display: flex;
  align-items: center;
  justify-content: space-between;
  width: 100%;
  margin-bottom: 0.16rem;
  font-family: var(--font-sometype-mono), ui-monospace, monospace;
  font-size: 9px;
  letter-spacing: 0.11em;
  text-transform: uppercase;
}

html[data-theme="diregram-v2"] .dg-node-card__meta-label {
  color: color-mix(in oklab, var(--dg-muted) 88%, #111);
}

html[data-theme="diregram-v2"] .dg-node-card__meta-id {
  color: var(--dg-accent);
}

html[data-theme="diregram-v2"] .dg-node-card__title {
  display: inline-flex;
  align-items: center;
  justify-content: flex-start !important;
  min-height: 0;
  width: 100%;
  border: 0;
  border-radius: 0;
  padding: 0;
  font-family: var(--font-lexend), "Helvetica Neue", Helvetica, Arial, system-ui, sans-serif;
  font-size: 0.9rem;
  font-weight: 650;
  letter-spacing: 0;
  line-height: 1.03;
  text-align: left;
  white-space: pre-wrap;
  word-break: break-word;
  overflow-wrap: anywhere;
  margin-bottom: 0.56rem;
  background: transparent;
  color: inherit;
}

html[data-theme="diregram-v2"] .dg-node-card__placeholder {
  position: relative;
  align-self: flex-start;
  margin-top: auto;
  margin-bottom: 0.06rem;
  width: 64px;
  height: 6px;
  border-radius: 999px;
  background: color-mix(in oklab, var(--dg-muted) 58%, transparent);
  pointer-events: none;
}

html[data-theme="diregram-v2"] .dg-node-card--active .dg-node-card__meta-label {
  color: rgba(248, 250, 252, 0.76);
}

html[data-theme="diregram-v2"] .dg-node-card--active .dg-node-card__meta-id {
  color: color-mix(in oklab, var(--dg-accent) 88%, white);
}

html[data-theme="diregram-v2"] .dg-node-card--active .dg-node-card__title {
  color: #f8fafc;
}

html[data-theme="diregram-v2"] .dg-node-card--active .dg-node-card__placeholder {
  background: color-mix(in oklab, var(--dg-accent) 86%, white);
}

html[data-theme="diregram-v2"] .dg-do-card {
  --dg-node-pad-x: 0.84rem;
  --dg-node-pad-top: 0.7rem;
  --dg-node-pad-bottom: 0.94rem;
  border: 1px solid var(--dg-border-strong);
  border-radius: 1.18rem;
  background: color-mix(in oklab, white 96%, var(--dg-surface));
  padding: var(--dg-node-pad-top) var(--dg-node-pad-x) var(--dg-node-pad-bottom);
  box-shadow: 0 3px 0 rgba(15, 16, 18, 0.22), 0 10px 18px rgba(15, 16, 18, 0.09);
  transition: border-color 130ms ease, box-shadow 130ms ease, transform 130ms ease, background-color 130ms ease;
}

html[data-theme="diregram-v2"] .dg-do-card:hover {
  transform: translateY(-1px);
  box-shadow: 0 4px 0 rgba(15, 16, 18, 0.2), 0 12px 18px rgba(15, 16, 18, 0.1);
}

html[data-theme="diregram-v2"] .dg-do-card.is-selected {
  border-color: color-mix(in oklab, var(--dg-accent) 64%, black);
  box-shadow: 0 0 0 2px color-mix(in oklab, var(--dg-accent) 34%, transparent), 0 3px 0 rgba(15, 16, 18, 0.24), 0 12px 18px rgba(15, 16, 18, 0.12);
}

html[data-theme="diregram-v2"] .dg-do-card.is-missing {
  border-color: color-mix(in oklab, var(--dg-accent) 38%, #fff);
  background: color-mix(in oklab, var(--dg-accent) 8%, white);
}

html[data-theme="diregram-v2"] .dg-do-inline {
  border: 1px solid color-mix(in oklab, var(--dg-border) 94%, #fff);
  border-radius: 0.72rem;
  background: color-mix(in oklab, var(--dg-surface) 90%, white);
}

html[data-theme="diregram-v2"] .dg-do-inline.is-selected {
  border-color: color-mix(in oklab, var(--dg-accent) 64%, black);
  box-shadow: 0 0 0 1px color-mix(in oklab, var(--dg-accent) 38%, transparent);
}

html[data-theme="diregram-v2"] .dg-do-bubble {
  border: 1px solid #191c21;
  background: #191c21;
  color: #fff;
}

html[data-theme="diregram-v2"] .dg-do-popover {
  border: 1px solid var(--dg-border);
  border-radius: var(--dg-radius-md);
  background: color-mix(in oklab, var(--dg-surface) 95%, white);
  box-shadow: var(--dg-shadow-md);
}

html[data-theme="diregram-v2"] .dg-do-card .dg-node-card__placeholder {
  margin-top: auto;
}

html[data-theme="diregram-v2"] .dg-dot-grid {
  background-image: var(--dg-plus-pattern);
  background-size:
    calc(var(--canvas-plus-size) * var(--canvas-zoom, 1))
    calc(var(--canvas-plus-size) * var(--canvas-zoom, 1));
  background-position: 0 0;
}

html[data-theme="diregram-v2"] select.dg-node-inline-select {
  /* Ensure dropdown menus stay readable even when the parent card is "reversed". */
  color-scheme: light;
}

html[data-theme="diregram-v2"] select.dg-node-inline-select option {
  color: #0f172a;
  background: #ffffff;
}

html[data-theme="diregram-v2"] .mac-fill--dots-1 {
  background-color: var(--dg-surface);
  background-image: radial-gradient(circle at 1px 1px, rgba(0, 0, 0, 0.14) 0.8px, transparent 0.9px);
  background-size: 10px 10px;
}

html[data-theme="diregram-v2"] .mac-fill--dots-2 {
  background-color: var(--dg-surface);
  background-image: radial-gradient(circle at 1px 1px, rgba(0, 0, 0, 0.14) 0.8px, transparent 0.9px);
  background-size: 7px 7px;
}

html[data-theme="diregram-v2"] .mac-fill--dots-3 {
  background-color: var(--dg-surface);
  background-image: radial-gradient(circle at 1px 1px, rgba(0, 0, 0, 0.12) 0.7px, transparent 0.8px);
  background-size: 5px 5px;
}

html[data-theme="diregram-v2"] .mac-fill--hatch {
  background-color: var(--dg-surface);
  background-image: repeating-linear-gradient(
    45deg,
    rgba(0, 0, 0, 0.14) 0 1px,
    transparent 1px 7px
  );
}

html[data-theme="diregram-v2"] .mac-fill--hatch2 {
  background-color: var(--dg-surface);
  background-image: repeating-linear-gradient(
    135deg,
    rgba(0, 0, 0, 0.14) 0 1px,
    transparent 1px 7px
  );
}

html[data-theme="diregram-v2"] .mac-fill--stripes-h {
  background-color: var(--dg-surface);
  background-image: repeating-linear-gradient(
    0deg,
    rgba(0, 0, 0, 0.14) 0 1px,
    transparent 1px 7px
  );
}

html[data-theme="diregram-v2"] .mac-fill--stripes-v {
  background-color: var(--dg-surface);
  background-image: repeating-linear-gradient(
    90deg,
    rgba(0, 0, 0, 0.14) 0 1px,
    transparent 1px 7px
  );
}

html[data-theme="diregram-v2"] .mac-fill--checker {
  background-color: var(--dg-surface);
  background-image:
    linear-gradient(45deg, rgba(0, 0, 0, 0.13) 25%, transparent 25%),
    linear-gradient(-45deg, rgba(0, 0, 0, 0.13) 25%, transparent 25%),
    linear-gradient(45deg, transparent 75%, rgba(0, 0, 0, 0.13) 75%),
    linear-gradient(-45deg, transparent 75%, rgba(0, 0, 0, 0.13) 75%);
  background-size: 10px 10px;
  background-position: 0 0, 0 5px, 5px -5px, -5px 0;
}

html[data-theme="diregram-v2"] .dg-gradient-title {
  background: linear-gradient(90deg, var(--dg-accent), var(--dg-accent-2));
  -webkit-background-clip: text;
  background-clip: text;
  color: transparent;
}

html[data-theme="diregram-v2"] .dg-hero-wordmark span {
  display: inline-block;
  animation: dg-char-in 0.8s cubic-bezier(0.2, 0.65, 0.3, 0.9) both;
}

@keyframes dg-char-in {
  from {
    opacity: 0;
    transform: translateX(-20px);
    filter: blur(10px);
  }
  to {
    opacity: 1;
    transform: translateX(0);
    filter: blur(0px);
  }
}

@keyframes dg-float-a {
  0% { transform: translate(0, 0); }
  50% { transform: translate(10px, 8px); }
  100% { transform: translate(0, 0); }
}

@keyframes dg-float-b {
  0% { transform: translate(0, 0); }
  50% { transform: translate(-8px, -10px); }
  100% { transform: translate(0, 0); }
}

/* ============================================================
   Workspace/File Loading Reveal (blob -> sharpen -> wash)
   ============================================================ */

html[data-theme="diregram-v2"] .dg-reveal-card {
	  --dg-reveal-delay: 0ms;
	  --dg-reveal-blob-start: #ffffff;
	  --dg-reveal-blob-mid: #ffffff;
	  --dg-reveal-blob-end: #ffffff;
	  --dg-reveal-bleed: 0px;
	  --dg-reveal-jx: 0px;
	  --dg-reveal-jy: 0px;
	  --dg-reveal-jr: 0deg;
	  --dg-reveal-js: 1;
	  position: relative;
	  /* Keep base shape aligned to the item, but do not hard-clip blur edges. */
	  overflow: visible;
	  isolation: isolate;
	  /* Start with no visible "card" so the blob can introduce the surface. */
	  background: transparent;
	  border-color: transparent;
	  box-shadow: none;
	  will-change: background-color, border-color, box-shadow;
	  animation: dg-reveal-shell 520ms cubic-bezier(0.2, 0.65, 0.3, 0.9) both;
	  animation-delay: calc(var(--dg-reveal-delay) + 560ms);
	}

html[data-theme="diregram-v2"] .dg-reveal-card::before,
html[data-theme="diregram-v2"] .dg-reveal-card::after {
  content: '';
  position: absolute;
  inset: 0;
  border-radius: inherit;
  pointer-events: none;
  z-index: 1;
}

html[data-theme="diregram-v2"] .dg-reveal-card::before {
	  background: var(--dg-reveal-blob-start);
	  inset: 0;
	  /* Full overlay clipped into a round blob that expands from top-left. */
	  clip-path: circle(18px at calc(18px + var(--dg-reveal-bleed)) calc(18px + var(--dg-reveal-bleed)));
	  filter: blur(24px);
	  opacity: 0.98;
	  transform-origin: calc(18px + var(--dg-reveal-bleed)) calc(18px + var(--dg-reveal-bleed));
	  will-change: clip-path, filter, opacity, transform, background-color;
	  animation: dg-reveal-blob 980ms cubic-bezier(0.2, 0.65, 0.3, 0.9) both;
	  animation-delay: var(--dg-reveal-delay);
	}

html[data-theme="diregram-v2"] .dg-reveal-card::after {
  /* White wash with a soft leading edge. */
  background: linear-gradient(90deg, rgba(255, 255, 255, 0) 0%, #ffffff 18%, #ffffff 100%);
  background-size: 220% 100%;
  background-position: 0% 0%;
  opacity: 0;
  will-change: background-position, opacity;
  animation: dg-reveal-wash 760ms cubic-bezier(0.2, 0.65, 0.3, 0.9) both;
  animation-delay: calc(var(--dg-reveal-delay) + 540ms);
}

html[data-theme="diregram-v2"] .dg-reveal-card__content {
  position: relative;
  z-index: 2;
  opacity: 0;
  transform: translateY(10px);
  filter: blur(12px);
  will-change: transform, filter, opacity;
  animation: dg-reveal-content 620ms cubic-bezier(0.2, 0.65, 0.3, 0.9) both;
  animation-delay: calc(var(--dg-reveal-delay) + 680ms);
}

@keyframes dg-reveal-blob {
	  0% {
	    clip-path: circle(8px at calc(18px + var(--dg-reveal-bleed)) calc(18px + var(--dg-reveal-bleed)));
	    transform: translate(var(--dg-reveal-jx), var(--dg-reveal-jy))
	      rotate(var(--dg-reveal-jr))
	      scale(calc(var(--dg-reveal-js) * 0.34));
	    filter: blur(22px);
	    opacity: 0.98;
	    background: var(--dg-reveal-blob-start);
	  }
	  12% {
	    background: var(--dg-reveal-blob-mid);
	  }
	  25% {
	    background: var(--dg-reveal-blob-end);
	  }
	  26% {
	    clip-path: circle(28% at calc(18px + var(--dg-reveal-bleed) + (var(--dg-reveal-jx) * 0.45)) calc(18px + var(--dg-reveal-bleed) + (var(--dg-reveal-jy) * 0.45)));
	    transform: translate(calc(var(--dg-reveal-jx) * 0.25), calc(var(--dg-reveal-jy) * 0.25))
	      rotate(calc(var(--dg-reveal-jr) * 0.35))
	      scale(calc(0.62 + ((var(--dg-reveal-js) - 1) * 0.28)));
	    filter: blur(16px);
	    opacity: 1;
	    background: var(--dg-reveal-blob-end);
	  }
	  50% {
	    clip-path: circle(86% at calc(18px + var(--dg-reveal-bleed)) calc(18px + var(--dg-reveal-bleed)));
	    transform: translate(calc(var(--dg-reveal-jx) * -0.08), calc(var(--dg-reveal-jy) * -0.08))
	      rotate(calc(var(--dg-reveal-jr) * -0.08))
	      scale(calc(0.9 + ((var(--dg-reveal-js) - 1) * 0.12)));
	    filter: blur(10px);
	    opacity: 1;
	    background: var(--dg-reveal-blob-end);
	  }
	  58% {
	    clip-path: circle(108% at calc(18px + var(--dg-reveal-bleed)) calc(18px + var(--dg-reveal-bleed)));
	    transform: translate(calc(var(--dg-reveal-jx) * -0.15), calc(var(--dg-reveal-jy) * -0.15))
	      rotate(calc(var(--dg-reveal-jr) * -0.15))
	      scale(calc(0.94 + ((var(--dg-reveal-js) - 1) * 0.16)));
	    filter: blur(6px);
	    opacity: 1;
	    background: var(--dg-reveal-blob-end);
	  }
	  70% {
	    clip-path: circle(138% at calc(18px + var(--dg-reveal-bleed)) calc(18px + var(--dg-reveal-bleed)));
	    transform: none;
	    filter: blur(0px);
	    opacity: 1;
	    background: var(--dg-reveal-blob-end);
	  }
	  86% {
	    clip-path: circle(138% at calc(18px + var(--dg-reveal-bleed)) calc(18px + var(--dg-reveal-bleed)));
	    transform: none;
	    filter: blur(0px);
	    opacity: 1;
	    background: var(--dg-reveal-blob-end);
	  }
	  100% {
	    clip-path: circle(138% at calc(18px + var(--dg-reveal-bleed)) calc(18px + var(--dg-reveal-bleed)));
	    transform: none;
	    filter: blur(0px);
	    opacity: 0;
	    background: var(--dg-reveal-blob-end);
	  }
	}

@keyframes dg-reveal-shell {
  from {
    background: transparent;
    border-color: transparent;
    box-shadow: none;
  }
  to {
    background: color-mix(in oklab, var(--dg-surface) 92%, white);
    border-color: color-mix(in oklab, var(--dg-border) 88%, #fff);
    box-shadow: var(--dg-shadow-sm);
  }
}

@keyframes dg-reveal-wash {
  0% {
    background-position: 0% 0%;
    opacity: 0;
  }
  1% {
    opacity: 1;
  }
  90% {
    background-position: 100% 0%;
    opacity: 1;
  }
  100% {
    background-position: 100% 0%;
    opacity: 0;
  }
}

@keyframes dg-reveal-content {
  from {
    opacity: 0;
    transform: translateY(10px);
    filter: blur(12px);
  }
  to {
    opacity: 1;
    transform: translateY(0px);
    filter: blur(0px);
  }
}

@media (prefers-reduced-motion: reduce) {
  html[data-theme="diregram-v2"] .dg-reveal-card {
    animation: none !important;
    background: color-mix(in oklab, var(--dg-surface) 92%, white) !important;
    border-color: color-mix(in oklab, var(--dg-border) 88%, #fff) !important;
    box-shadow: var(--dg-shadow-sm) !important;
  }

  html[data-theme="diregram-v2"] .dg-reveal-card::before,
  html[data-theme="diregram-v2"] .dg-reveal-card::after {
    animation: none !important;
    opacity: 0 !important;
    transform: none !important;
    filter: none !important;
    clip-path: none !important;
  }

  html[data-theme="diregram-v2"] .dg-reveal-card__content {
    animation: none !important;
    opacity: 1 !important;
    transform: none !important;
    filter: none !important;
  }

  html[data-theme="diregram-v2"] .dg-screen-fade-in {
    animation: none !important;
  }

  html[data-theme="diregram-v2"] .dg-switch-fade {
    transition: none !important;
  }

  html[data-theme="diregram-v2"] .dg-screen-loading {
    animation: none !important;
    background-color: var(--dg-bg) !important;
  }
}
